import java.util.Date;
import java.util.List;
import it.uiip.airport.core.model.RouteModel;
import it.uiip.airport.core.dao.impl.DefaultAirportRouteDao;
import de.hybris.platform.servicelayer.model.ModelService;
import it.uiip.airport.core.enums.StatusRouteEnum;
import de.hybris.platform.servicelayer.search.FlexibleSearchQuery;



flexibleSearchService = spring.getBean("flexibleSearchService");
ModelService modelService=spring.getBean("modelService");
  
query = new FlexibleSearchQuery("SELECT {R.pk} FROM {Route AS R 
	JOIN Flight AS F ON {F.pk} = {R.flight} 
	JOIN Airport AS A ON {A.pk} = {F.airportDep} } 
	WHERE {A.city} = 'Londra' AND {R.dateRouteDep} LIKE '2019-06-27%'");
  
List routes = flexibleSearchService.search(query).result;


for(RouteModel r:routes)
{
  r.setStatusRoute(StatusRouteEnum.DELETED);
  modelService.save(r);
}